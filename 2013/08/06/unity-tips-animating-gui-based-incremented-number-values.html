<!DOCTYPE html>
<html>
  <head>
  <title>Unity tips: Animating GUI based incremented number values « Stef Ki's metaverse</title>
  
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Let’s say you have some type of event that increases your score, which is displayed on the GUI, but instead of simply changing the value, you want to “animat...">
  
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="https://stefkiourk.github.io/2013/08/06/unity-tips-animating-gui-based-incremented-number-values">
  <link rel="alternate" type="application/rss+xml" title="Stef Ki's metaverse" href="https://stefkiourk.github.io/feed.xml" />
  <script src="/js/jquery.js"></script>
  <script type="text/javascript">
  	$(window).load(function() {
		$(".se-pre-con").fadeOut("slow");;
	});
  </script> 
</head>
 
 <body>
    <div class="se-pre-con"></div>
<header class="header">
  <div class="wrapper">
    <a class="site-title" href="/">Stef Ki's metaverse</a>
    <nav class="site-nav">
      
        <a class="page-link" href="/archives/">Archives</a>
        
    </nav>
  </div>
</header>
    <div class="page-content">
      <div class="wrapper">
        <div class="col-main">
          <div class="post">

  <header class="post-header">
    <h1 class="post-title">Unity tips: Animating GUI based incremented number values</h1>
    <p class="post-meta">Oct 22, 2014</p>
  </header>
  
  <article class="post-content">
    <p>Let’s say you have some type of event that increases your score, which is displayed on the GUI, but instead of simply changing the value, you want to “animate” towards the value by visually allowing the user to see all the values between. I spent an hour coding a working example, which is pretty quick n’ dirty. Open the example link above.</p>

<p>Download link(embed .unity3d): <a href="https://github.com/stefkiourk/unitips-animated-counter-example/archive/master.zip">AnimatedGUICounterExample</a></p>

<p><img src="/images/unity-animated-counter.jpg" alt="AnimatedGUICounterExample" /></p>

<ol>
  <li>You have a limited amount of time</li>
  <li>Collecting mushrooms adds 1.6 seconds of available time and increases score (which we want to animate) by 500</li>
  <li>Game finishes either by collecting all the mushrooms (reaching 4500 score) or running out of time</li>
</ol>

<p>Mushroom has a “MushController” script attached which implements the OnTriggerEnter Method, allowing us to “listen” for collisions (make sure you have a rigidbody component attached to your GameObject). Checking if our object collided with the FPSController prefab (or anything related) we call IncrementScore and destroy the object. (I removed the code that’s not related to the purpose). In addition to increasing the score, we are also increasing a “buffer”, which is checked on an Update to see if it’s above zero.</p>

<p>If it is, it starts “DecreaseScoreBuffer” via a coroutine. “DecreaseScoreBuffer” is IEnumerator type, allowing as to yield the steps. Arguably one could achieve the same result with Update(), having the buffer decreasing (and updating the GUI label) at ~60 times per second (default), but this gives us more flexibility, being able to yield for longer periods, etc (Or at least that’s what I know, given my current knowledge and time spent on the matter).</p>

<h2 id="ontriggerenter"><strong>OnTriggerEnter()</strong></h2>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">void</span> <span class="nf">OnTriggerEnter</span><span class="p">(</span><span class="n">Collider</span> <span class="n">collider</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">collider</span><span class="p">.</span><span class="n">name</span> <span class="p">==</span> <span class="s">"DemoPlayer"</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="n">GameLogic</span><span class="p">.</span><span class="nf">IncrementScore</span><span class="p">(</span><span class="m">500</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<h2 id="gamelogicincrementscore"><strong>GameLogic.IncrementScore()</strong></h2>
<p><em>( tweaks public static properties related to the game)</em></p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="nf">IncrementScore</span><span class="p">(</span><span class="kt">int</span> <span class="n">howMuch</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">score</span> <span class="p">+=</span> <span class="n">howMuch</span><span class="p">;</span>
  <span class="n">scoreToAdd</span> <span class="p">=</span> <span class="n">howMuch</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

<p>On an Update method, have the “scoreToAdd” property checked. If it’s above 0 (buffer not empty), start the coroutine.</p>

<h2 id="mainupdate"><strong>Main.Update()</strong></h2>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="n">GameLogic</span><span class="p">.</span><span class="n">scoreToAdd</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)</span>
<span class="p">{</span>
  <span class="nf">StartCoroutine</span><span class="p">(</span><span class="n">GameLogic</span><span class="p">.</span><span class="nf">DecreaseScoreBuffer</span><span class="p">());</span>
<span class="p">}</span>
</code></pre>
</div>

<h2 id="gamelogicdecreasescorebuffer"><strong>GameLogic.DecreaseScoreBuffer()</strong></h2>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="k">public</span> <span class="k">static</span> <span class="n">IEnumerator</span> <span class="nf">DecreaseScoreBuffer</span><span class="p">()</span>
<span class="p">{</span>
  <span class="c1">//onRoutine is a bool property that works as a brake, since Update() would either way call DecreaseScoreBuffer ~60 times per second.
</span>  <span class="k">if</span> <span class="p">(</span><span class="n">onRoutine</span><span class="p">)</span>
  <span class="p">{</span>
    <span class="n">onRoutine</span> <span class="p">=</span> <span class="k">false</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">scoreToAdd</span> <span class="p">&gt;</span> <span class="m">10</span><span class="p">)</span>
    <span class="p">{</span>
      <span class="n">scoreToAdd</span> <span class="p">/=</span> <span class="m">2</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
      <span class="n">scoreToAdd</span><span class="p">--;</span>
    <span class="p">}</span>
    <span class="n">scoreLabel</span><span class="p">.</span><span class="n">GetComponent</span><span class="p">&lt;</span><span class="n">UILabel</span><span class="p">&gt;().</span><span class="n">text</span> <span class="p">=</span> <span class="n">Convert</span><span class="p">.</span><span class="nf">ToString</span><span class="p">(</span><span class="n">score</span> <span class="p">-</span> <span class="n">scoreToAdd</span><span class="p">);</span> <span class="c1">// Accessing scoreLabel's (GameObject) UILabel component (NGUI).
</span>    <span class="k">yield</span> <span class="k">return</span> <span class="k">new</span> <span class="nf">WaitForSeconds</span><span class="p">(</span><span class="m">0.3f</span><span class="p">);</span> <span class="c1">// wait for ~1/3 of a second before increasing the score in the label
</span>    <span class="n">onRoutine</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span> <span class="c1">//setting onRoutine back to true after waiting for n seconds
</span>  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<p>Made with Unity,  NGUI and iTween. Feedback is most welcome.</p>

  </article>
  <div class="post-tags">
  Tags: 
  
  
  <a href="/tags/#game-dev">game-dev</a>,
  
  <a href="/tags/#unity">unity</a>,
  
  <a href="/tags/#tips">tips</a>
  
</div>
  
<div class="post-comments">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
      var disqus_shortname = 'stefki'; // required: replace example with your forum shortname
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
</div> 
</div>

        </div>
        <div class="col-second">
          <div class="col-box col-box-author">
  <img class="avatar" src="/images/42.png" alt="Stef Ki">
  <div class="col-box-title name">Stef Ki</div>
  <p>Hi, I'm a software developer, trusting  neither software xor develovers.</p>
  <p class="contact">
    
    <a href="https://github.com/stefkiourk">GitHub</a>
    
    
    <a href="https://twitter.com/skiourk">Twitter</a>
    
    
    <a href="mailto:your_email@example.com">Email</a>
    
  </p>
</div>

<div class="col-box">
  <div class="col-box-title">Newest Posts</div>
  <ul class="post-list">
    
      <li><a class="post-link" href="/2016/04/29/unity-tips-animating-gui-based-incremented-number-values">Obligatory post regarding migration to Jekyll</a></li>
    
      <li><a class="post-link" href="/2013/08/06/unity-tips-animating-gui-based-incremented-number-values">Unity tips: Animating GUI based incremented number values</a></li>
    
  </ul>
</div>

<div class="col-box post-toc hide">
  <div class="col-box-title">TOC</div>
</div>
        </div>
      </div>
    </div>
    <footer class="footer">
<div class="wrapper">
&copy; 2016 Stef Ki
</div>
</footer>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-38558375-2', 'auto');
  ga('send', 'pageview');

</script>
<script src="/js/easybook.js"></script>

  </body>
</html>
